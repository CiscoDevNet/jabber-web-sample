var cwic=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=n(1),o=n(15),r=n(25),s=n(27),a=n(35),c=n(45);e.exports.MultimediaController=i.MultimediaController,e.exports.TelephonyController=o.TelephonyController,e.exports.LoginController=r.LoginController,e.exports.SystemController=s.SystemController,e.exports.WindowController=a.WindowController,e.exports.CertificateController=c.CertificateController},function(e,t,n){function i(){function e(){g.MessageReceiver.addMessageHandler("multimediadevicechange",n.bind(this)),g.MessageReceiver.addMessageHandler("ringtonechanged",r.bind(this)),this.refreshMediaDeviceList(),this.refreshRingtoneList()}function t(){g.MessageReceiver.removeMessageHandler("multimediadevicechange"),this.speakerList.length=0,this.cameraList.length=0,this.microphoneList.length=0,this.ringerList.length=0;var e=a.onMediaDeviceListChanged;e&&e()}function n(){this.refreshMediaDeviceList()}function i(e){var t=e.multimediadevices;this.speakerList.length=0,this.cameraList.length=0,this.microphoneList.length=0,this.ringerList.length=0;for(var n=0;n<t.length;++n){var i=t[n];if(i.canPlayout===!0){var o=new g.Speaker(i);this.speakerList.push(o)}if(i.canRecord===!0){var r=new g.Microphone(i);this.microphoneList.push(r)}if(i.canCapture===!0){var s=new g.Camera(i);this.cameraList.push(s)}if(i.canRing===!0){var c=new g.Ringer(i);this.ringerList.push(c)}}var d=a.onMediaDeviceListChanged;d&&d()}function o(e){var t=e.ringtones;this.ringtoneList=[];for(var n=0;n<t.length;n++){var i=new g.Ringtone(t[n].name);this.ringtoneList.push(i)}var o=a.onRingtoneListChanged;o&&o()}function r(e){var t=new g.Ringtone(e.ringtone),n=a.onRingtoneChanged;n&&n(t)}function s(e){for(var t=e.monitors,n=[],i=0;i<t.length;++i){var o=new g.Monitor(t[i]);n.push(o)}var r=a.onMonitorListChanged;r&&r(n)}this.speakerList=[],this.microphoneList=[],this.ringerList=[],this.cameraList=[],this.ringtoneList=[];var a={};g.MessageReceiver.addMessageHandler("multimediacapabilitiesstarted",e.bind(this)),g.MessageReceiver.addMessageHandler("multimediacapabilitiesstopped",t.bind(this)),this.refreshMediaDeviceList=function(e){var t="getMultimediaDevices",n={},o=i.bind(this);g.MessageSender.sendMessage(t,n,e,o)},this.refreshRingtoneList=function(e){var t="getAvailableRingtones",n={},i=o.bind(this);g.MessageSender.sendMessage(t,n,e,i)},this.refreshMonitorList=function(e){var t="getMonitorList",n={},i=s.bind(this);g.MessageSender.sendMessage(t,n,e,i)},this.addEventHandler=function(e,t){a[e]=t},this.removeEventHandler=function(e){delete a[e]}}var o=n(2),r=n(7),s=n(8),a=n(10),c=n(11),d=n(12),l=n(13),p=n(14),g={Speaker:s.Speaker,Microphone:a.Microphone,Camera:c.Camera,Ringer:d.Ringer,Ringtone:l.Ringtone,Monitor:p.Monitor,MessageReceiver:o.MessageReceiver,MessageSender:r.MessageSender};i.prototype.speakerList=[],i.prototype.ringerList=[],i.prototype.microphoneList=[],i.prototype.cameraList=[],i.prototype.ringtoneList=[],i.prototype.selectSpeaker=function(e,t){if(!(e instanceof g.Speaker))throw Error("Invalid Object");var n="setPlayoutDevice",i={clientPlayoutID:e.deviceID};g.MessageSender.sendMessage(n,i,t)},i.prototype.selectMicrophone=function(e,t){if(!(e instanceof g.Microphone))throw Error("Invalid Object");var n="setRecordingDevice",i={clientRecordingID:e.deviceID};g.MessageSender.sendMessage(n,i,t)},i.prototype.selectCamera=function(e,t){if(!(e instanceof g.Camera))throw Error("Invalid Object");var n="setCaptureDevice",i={clientCaptureID:e.deviceID};g.MessageSender.sendMessage(n,i,t)},i.prototype.selectRinger=function(e,t){if(!(e instanceof g.Ringer))throw Error("Invalid Object");var n="setRingerDevice",i={clientRingerID:e.deviceID};g.MessageSender.sendMessage(n,i,t)},i.prototype.playRingtoneOnAllRingers=function(e){var t="setPlayRingerOnAllDevices",n={};g.MessageSender.sendMessage(t,n,e)},i.prototype.selectRingtone=function(e,t){if(!(e instanceof g.Ringtone))throw Error("Invalid Object");var n="setCurrentRingtone",i={ringtone:e.name};g.MessageSender.sendMessage(n,i,t)},i.prototype.selectMonitor=function(e,t){if(!(e instanceof g.Monitor))throw Error("Invalid Object");var n="selectMonitor",i={monitorID:e.id};g.MessageSender.sendMessage(n,i,t)},i.prototype.highlightMonitor=function(e,t){if(!(e instanceof g.Monitor))throw Error("Invalid Object");var n="showMonitorBorderIndicator",i={monitorID:e.id};g.MessageSender.sendMessage(n,i,t)},i.prototype.unHighlightMonitor=function(e){var t="hideMonitorBorderIndicator",n={};g.MessageSender.sendMessage(t,n,e)},i.prototype.setMonitorHighlightColor=function(e,t,n,i){var o="setMonitorBorderIndicatorColor",r={redValue:e,greenValue:t,blueValue:n};g.MessageSender.sendMessage(o,r,i)},e.exports.MultimediaController=new i},function(e,t,n){function i(){var e={};this.addMessageHandler=function(t,n){e[t]=n},this.removeMessageHandler=function(t){delete e[t]},this.onMessageReceived=function(e){e.ciscoSDKServerMessage?this.onServerMessageReceived(e.ciscoSDKServerMessage):e.ciscoChannelServerMessage?this.onChannelMessage(e.ciscoChannelServerMessage):a.Logger.error("Unknown message from plugin: ",e)},this.onServerMessageReceived=function(t){var n=t.content,i=t.error,o=t.replyToMessageId,r=t.name;if(a.Logger.debug("Received Message: "+r,t),i){if(a.Logger.debug("Error response for Message: "+r,t),a.MessageResponseHandler.errorHandlerExists(o)){var s=a.MessageResponseHandler.getErrorHandler(o);s(a.SystemErrors[i]),a.MessageResponseHandler.removeErrorHandler(o)}}else{if(a.MessageResponseHandler.successHandlerExist(o)){a.Logger.debug("Success response for Message: "+r,t);var c=a.MessageResponseHandler.getSuccessHandler(o);c(n)}if(e[r]){var d=e[r];d(n)}}},this.onChannelMessage=function(t){if("ChannelDisconnect"===t.name||"HostDisconnect"===t.name){a.Logger.error("Connection with add-on has been lost","");var n=e.addonConnectionLost;n&&n()}else a.Logger.debug("Unknown channel message: "+t.name)}}var o=n(3),r=n(4),s=n(6),a={MessageResponseHandler:o.MessageResponseHandler,Logger:r.Logger,SystemErrors:s.SystemErrors};e.exports.MessageReceiver=new i},function(e,t){function n(){var e={},t={};this.addErrorHandler=function(t,n){e[t]=n},this.addSuccessHandler=function(e,n){t[e]=n},this.removeErrorHandler=function(t){delete e[t]},this.removeSuccessHandler=function(e){delete t[e]},this.errorHandlerExists=function(t){return!!e[t]},this.successHandlerExist=function(e){return!!t[e]},this.getErrorHandler=function(t){return e[t]},this.getSuccessHandler=function(e){return t[e]}}e.exports.MessageResponseHandler=new n},function(e,t,n){function i(){}var o=n(5),r={Utilities:o.Utilities},s={debug:0,info:1,warning:2,error:3};i.prototype.logLevel=0,i.prototype.debug=function(e,t){if(t=t?t:"",this.logLevel<=s.debug){var n=new Date,i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("00"+n.getMilliseconds()).slice(-3);"InternetExplorer"===r.Utilities.getBrowserType()?console.log("[cwic][DEBUG]["+i+"] "+e,t):console.log("%c[cwic][DEBUG]["+i+"] "+e,"color: green",t)}},i.prototype.info=function(e,t){if(t=t?t:"",this.logLevel<=s.info){var n=new Date,i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("00"+n.getMilliseconds()).slice(-3);"InternetExplorer"===r.Utilities.getBrowserType()?console.log("[cwic][INFO ]["+i+"] "+e,t):console.log("%c[cwic][INFO ]["+i+"] "+e,"color: black",t)}},i.prototype.warning=function(e,t){if(t=t?t:"",this.logLevel<=s.warning){var n=new Date,i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("00"+n.getMilliseconds()).slice(-3);"InternetExplorer"===r.Utilities.getBrowserType()?console.log("[cwic][WARNI]["+i+"] "+e,t):console.log("%c[cwic][WARNI]["+i+"] "+e,"color: #FF8000",t)}},i.prototype.error=function(e,t){if(t=t?t:"",this.logLevel<=s.error){var n=new Date,i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2)+"."+("00"+n.getMilliseconds()).slice(-3);"InternetExplorer"===r.Utilities.getBrowserType()?console.log("[cwic][ERROR]["+i+"] "+e,t):console.log("%c[cwic][ERROR]["+i+"] "+e,"color: red",t)}},e.exports.Logger=new i},function(e,t){function n(){}n.prototype.getBrowserType=function(){var e="Unknown";return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?e="Opera":navigator.userAgent.indexOf("Chrome")!=-1?e="Chrome":navigator.userAgent.indexOf("Safari")!=-1?e="Safari":navigator.userAgent.indexOf("Firefox")!=-1?e="Firefox":navigator.userAgent.indexOf("MSIE")==-1&&1!=!!document.documentMode||(e="InternetExplorer"),e},n.prototype.getBrowserVersion=function(){var e,t=navigator.appName,n=navigator.userAgent,i=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return i&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[t,navigator.appVersion,"-?"],i[1]},n.prototype.getOSType=function(){var e="Unknown";return window.navigator.userAgent.indexOf("Windows NT 10.0")!=-1&&(e="Windows 10"),window.navigator.userAgent.indexOf("Windows NT 6.2")!=-1&&(e="Windows 8"),window.navigator.userAgent.indexOf("Windows NT 6.1")!=-1&&(e="Windows 7"),window.navigator.userAgent.indexOf("Windows NT 6.0")!=-1&&(e="Windows Vista"),window.navigator.userAgent.indexOf("Windows NT 5.1")!=-1&&(e="Windows XP"),window.navigator.userAgent.indexOf("Windows NT 5.0")!=-1&&(e="Windows 2000"),window.navigator.userAgent.indexOf("Mac")!=-1&&(e="Mac"),e},n.prototype.generateUniqueId=function(){return(new Date).valueOf().toString()+Math.floor(1e4*Math.random()+1).toString()},e.exports.Utilities=new n},function(e,t){var n={eSyntaxError:"NativeError",eOperationFailed:"OperationFailed",eNotUserAuthorized:"UserNotAuthorized",eInvalidArgument:"InvalidArguments",eCapabilityMissing:"CapabilityMissing",eLoggedInLock:"MoreThenOneInstanceRunning",eInvalidMonitor:"InvalidMonitor",eInvalidMonitorID:"InvalidMonitor",eInvalidCallID:"InvalidConversation"};e.exports.SystemErrors=n},function(e,t,n){function i(e){this.message=e}function o(){}var r=n(3),s=n(4),a=n(5),c={MessageResponseHandler:r.MessageResponseHandler,Logger:s.Logger,Utilities:a.Utilities};i.prototype=Object.create(Error.prototype),i.prototype.name="cwic.SystemException",i.prototype.constructor=i,o.prototype.sendMessage=function(e,t,n,o){if(null==this.plugin)throw new i;var r=c.Utilities.generateUniqueId();"function"==typeof n&&c.MessageResponseHandler.addErrorHandler(r,n),"function"==typeof o&&c.MessageResponseHandler.addSuccessHandler(r,o);var s={ciscoSDKClientMessage:{messageId:r,name:e,content:t||{}}};this.plugin.sendMessage(s)},o.prototype.addEventHandler=function(e,t){this.eventHandlers[e]=t},o.prototype.plugin=null,o.prototype.eventHandlers=[],e.exports.MessageSender=new o},function(e,t,n){function i(e){var t={deviceID:e.clientPlayoutID,hardwareID:e.hardwareID,isSelected:e.isSelectedPlayoutDevice,name:e.playoutName,vendorID:e.vendorID};s.MediaDevice.call(this,t),this.volume=e.volume}var o=n(7),r=n(9),s={MessageSender:o.MessageSender,MediaDevice:r.MediaDevice};i.prototype=Object.create(s.MediaDevice.prototype),i.prototype.constructor=i,i.prototype.volume=0,i.prototype.setVolume=function(e,t){if(e<0||e>100)throw Error("Invalid Volume Value");this.volume=e;var n="setCurrentSpeakerVolume",i={volume:e};s.MessageSender.sendMessage(n,i,t)},e.exports.Speaker=i},function(e,t){function n(e){this.deviceID=e.deviceID,this.hardwareID=e.hardwareID,this.isSelected=e.isSelected,this.name=e.name,this.vendorID=e.vendorID}n.prototype.deviceID=null,n.prototype.hardwareID=null,n.prototype.isSelected=null,n.prototype.name=null,n.prototype.vendorID=null,e.exports.MediaDevice=n},function(e,t,n){function i(e){var t={deviceID:e.recordingID,hardwareID:e.hardwareID,isSelected:e.isSelectedRecordingDevice,name:e.recordingName,vendorID:e.vendorID};s.MediaDevice.call(this,t),this.volume=e.volume}var o=n(7),r=n(9),s={MessageSender:o.MessageSender,MediaDevice:r.MediaDevice};i.prototype=Object.create(s.MediaDevice.prototype),i.prototype.constructor=i,i.prototype.volume=0,i.prototype.setVolume=function(e,t){if(e<0||e>100)throw Error("Invalid Volume Value");this.volume=e;var n="setCurrentMicrophoneVolume",i={volume:e};s.MessageSender.sendMessage(n,i,t)},e.exports.Microphone=i},function(e,t,n){function i(e){var t={deviceID:e.captureID,hardwareID:e.hardwareID,isSelected:e.isSelectedCaptureDevice,name:e.captureName,vendorID:e.vendorID};r.MediaDevice.call(this,t)}var o=n(9),r={MediaDevice:o.MediaDevice};i.prototype=Object.create(r.MediaDevice.prototype),i.prototype.constructor=i,e.exports.Camera=i},function(e,t,n){function i(e){var t={deviceID:e.ringerID,hardwareID:e.hardwareID,isSelected:e.isSelectedRingerDevice,name:e.ringerName,vendorID:e.vendorID};s.MediaDevice.call(this,t),this.volume=e.volume}var o=n(7),r=n(9),s={MessageSender:o.MessageSender,MediaDevice:r.MediaDevice};i.prototype=Object.create(s.MediaDevice.prototype),i.prototype.constructor=i,i.prototype.volume=0,i.prototype.setVolume=function(e,t){if(e<0||e>100)throw Error("Invalid Volume Value");this.volume=e;var n="setCurrentRingerVolume",i={volume:e};s.MessageSender.sendMessage(n,i,t)},e.exports.Ringer=i},function(e,t){function n(e){this.name=e}n.prototype.name="unknown",e.exports.Ringtone=n},function(e,t){function n(e){this.id=e.ID,this.name=e.name}n.prototype.id="Unknown",n.prototype.name="Unknown",e.exports.Monitor=n},function(e,t,n){function i(){function e(e){var t,n=e.devices;for(this.telephonyDevices.length=0,t=0;t<n.length;++t){var i=n[t],o=i.controlMode;switch(o){case"Deskphone":var r=new u.DeskPhone(n[t]);this.telephonyDevices.push(r);break;case"Softphone":var s=new u.SoftPhone(n[t]);this.telephonyDevices.push(s);break;case"ExtendConnect":var a=new u.RemotePhone(n[t]);this.telephonyDevices.push(a)}var c=d.onTelephonyDeviceListChanged;c&&c()}}function t(e){this.connectionState=u.TelephonyConnectionStateMap[e];var t=d.onConnectionStateChanged;t&&t(this.connectionState)}function n(e){var t=e;u.Logger.error("Failed to connect with CUCM or connection has been broken. Reason: "+t);var n=d.onConnectionFailure;n&&n(t)}function i(e){var t=d.onConversationUpdated;if(t){var n=new u.TelephonyConversation(e);t(n)}}function o(e){var t,n=new u.TelephonyConversation(e);switch(n.callState){case"OffHook":t=d.onConversationOutgoing;break;case"Ringin":t=d.onConversationIncoming;break;case"OnHook":t=d.onConversationEnded;break;case"Connected":t=d.onConversationStarted;break;default:t=d.onConversationUpdated}t&&t(n)}function r(e){var t=e.notificationInfo,n=d.onVisualCallPickupNotification;n&&n(t)}function s(e){var t=e.isAudioEnabled,n=d.onAudioCallPickupNotification;n&&n(t)}function a(e){}function c(e){var t=new u.TelephonyControllerCapabilities(e);this.capabilities=t,this.recentGroupCallPickupNumbers=e.recentGroupCallPickupNumbers?e.recentGroupCallPickupNumbers:[]}var d={};u.MessageReceiver.addMessageHandler("telephonydeviceschange",e.bind(this)),u.MessageReceiver.addMessageHandler("connectionstatuschange",t.bind(this)),u.MessageReceiver.addMessageHandler("connectionfailure",n.bind(this)),u.MessageReceiver.addMessageHandler("conversationCallStateChanged",o.bind(this)),u.MessageReceiver.addMessageHandler("conversationStateChanged",i.bind(this)),u.MessageReceiver.addMessageHandler("audioCallPickupNotification",s.bind(this)),u.MessageReceiver.addMessageHandler("visualCallPickupNotification",r.bind(this)),u.MessageReceiver.addMessageHandler("callPickupError",a.bind(this)),u.MessageReceiver.addMessageHandler("telephonyservicechange",c.bind(this)),this.addEventHandler=function(e,t){d[e]=t},this.removeEventHandler=function(e){delete d[e]},this.refreshTelephonyDeviceList=function(){var t="getAvailableDevices",n={},i=null,o=e.bind(this);u.MessageSender.sendMessage(t,n,i,o)}}var o=n(2),r=n(7),s=n(16),a=n(17),c=n(18),d=n(21),l=n(22),p=n(23),g=n(24),h=n(4),u={TelephonyControllerCapabilities:s.TelephonyControllerCapabilities,TelephonyConnectionStateMap:a.TelephonyConnectionStateMap,TelephonyConversation:c.TelephonyConversation,TelephonyDevice:d.TelephonyDevice,SoftPhone:l.SoftPhone,DeskPhone:p.Deskphone,RemotePhone:g.RemotePhone,MessageSender:r.MessageSender,MessageReceiver:o.MessageReceiver,Logger:h.Logger};i.prototype.telephonyDevices=[],i.prototype.connectionState="Disconnected",i.prototype.capabilities=null,i.prototype.recentGroupCallPickupNumbers=[],i.prototype.getConnectedTelephonyDevice=function(){var e=null;for(var t in this.telephonyDevices)if(this.telephonyDevices[t].isSelected){e=this.telephonyDevices[t];break}return e},i.prototype.startAudioConversation=function(e,t){var n="originate",i={recipient:e,videoDirection:"RecvOnly"};u.MessageSender.sendMessage(n,i,t)},i.prototype.startVideoConversation=function(e,t){var n="originate",i={recipient:e,videoDirection:"sendRecv"};u.MessageSender.sendMessage(n,i,t)},i.prototype.callPickup=function(e){var t="callPickup",n={};u.MessageSender.sendMessage(t,n,e)},i.prototype.groupCallPickup=function(e,t){var n="groupCallPickup",i={pickupNumber:e};u.MessageSender.sendMessage(n,i,t)},i.prototype.otherGroupPickup=function(e){var t="otherGroupPickup",n={};u.MessageSender.sendMessage(t,n,e)},e.exports.TelephonyController=new i},function(e,t){function n(e){this.isHuntGroupEnabled=e.isHuntGroupEnabled,this.isCallPickupEnabled=e.isCallPickupEnabled,this.isGroupCallPickupEnabled=e.isGroupCallPickupEnabled,this.isOtherGroupPickupEnabled=e.isOtherGroupPickupEnabled}n.prototype.isHuntGroupEnabled=!1,n.prototype.isCallPickupEnabled=!1,n.prototype.isGroupCallPickupEnabled=!1,n.prototype.isOtherGroupPickupEnabled=!1,e.exports.TelephonyControllerCapabilities=n},function(e,t){var n={eReady:"Connected",eIdle:"Disconnected",eRegistering:"Connecting",eConnectionTerminated:"Disconnected"};e.exports.TelephonyConnectionStateMap=n},function(e,t,n){function i(e){this.ID=e.callId;var t={Inactive:!0,SendRecv:!1,SendOnly:!1,RecvOnly:!0},n={Inactive:!1,SendRecv:!0,SendOnly:!0,RecvOnly:!1};this.capabilities=new c.TelephonyConversationCapabilities(e.capabilities),this.capabilities.canStartVideo=t[e.videoDirection],this.capabilities.canStopVideo=n[e.videoDirection],this.callState=e.callState,this.states=new c.TelephonyConversationState(e),this.localParticipant=e.localParticipant,this.maxParticipants=e.maxParticipants,this.participants=e.participants,this.videoDirection=e.videoDirection}var o=n(2),r=n(7),s=n(19),a=n(20),c={MessageSender:r.MessageSender,MessageReceiver:o.MessageReceiver,TelephonyConversationState:s.TelephonyConversationStates,TelephonyConversationCapabilities:a.TelephonyConversationCapabilities};i.prototype.states=null,i.prototype.capabilities=null,i.prototype.callState=null,i.prototype.answerAudio=function(e){var t="answer",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.answerVideo=function(e){var t="answer",n={callId:this.ID,videoDirection:"SendRecv"};c.MessageSender.sendMessage(t,n,e)},i.prototype.reject=function(e){var t="iDivert",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.end=function(e){var t="endCall",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.hold=function(e){var t="hold",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.resume=function(e){var t="resume",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.startVideo=function(e){var t="setVideoDirection",n={callId:this.ID,videoDirection:"SendRecv"};c.MessageSender.sendMessage(t,n,e)},i.prototype.stopVideo=function(e){var t="setVideoDirection",n={callId:this.ID,videoDirection:"RecvOnly"};c.MessageSender.sendMessage(t,n,e)},i.prototype.muteAudio=function(e){var t="mute",n={callId:this.ID,muteVideo:!1,muteAudio:!0};c.MessageSender.sendMessage(t,n,e)},i.prototype.unmuteAudio=function(e){var t="unmute",n={callId:this.ID,unmuteAudio:!0};c.MessageSender.sendMessage(t,n,e)},i.prototype.muteVideo=function(e){var t="mute",n={callId:this.ID,muteVideo:!0,muteAudio:!1};c.MessageSender.sendMessage(t,n,e)},i.prototype.unmuteVideo=function(e){var t="unmute",n={callId:this.ID,unmuteVideo:!0};c.MessageSender.sendMessage(t,n,e)},i.prototype.transferConversation=function(e,t){var n="transferCall",i={callId:this.ID,transferToNumber:e};c.MessageSender.sendMessage(n,i,t)},i.prototype.completeTransfer=function(e){var t="completeTransfer",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.merge=function(e,t){if(!(e instanceof i))throw Error("Invalid Object");var n="joinCalls",o={callId:this.ID,joinCallId:e.ID};c.MessageSender.sendMessage(n,o,t)},i.prototype.startScreenShare=function(e){var t="requestDesktopShare",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.stopScreenShare=function(e){var t="releaseDesktopShare",n={callId:this.ID};c.MessageSender.sendMessage(t,n,e)},i.prototype.sendDTMF=function(e,t){var n="sendDTMF",i={callId:this.ID,digit:e};c.MessageSender.sendMessage(n,i,t)},i.prototype.startRemoteCameraAction=function(e,t){var n="startFECCAction",i={callId:this.ID,action:e};c.MessageSender.sendMessage(n,i,t)},i.prototype.stopRemoteCameraAction=function(e,t){var n="stopFECCAction",i={callId:this.ID,action:e};c.MessageSender.sendMessage(n,i,t)},t.TelephonyConversation=i},function(e,t){function n(e){this.isAudioMuted=e.audioMuted,this.isVideoMuted=e.videoMuted,this.isLocalSharing=e.isLocalSharing,this.isRemoteSharing=e.isRemoteSharing}n.prototype.isAudioMuted=!1,n.prototype.isVideoMuted=!1,n.prototype.isLocalSharing=!1,n.prototype.isRemoteSharing=!1,e.exports.TelephonyConversationStates=n},function(e,t){function n(e){this.canAnswer=e.canAnswerCall,this.canEnd=e.canEndCall,this.canReject=e.canRejectCall,this.canHold=e.canHold,this.canResume=e.canResume,this.canMerge=e.canJoinAcrossLine,this.canTransfer=e.canDirectTransfer,this.canMuteAudio=e.canMuteAudio,this.canUnmuteAudio=e.canUnmuteAudio,this.canMuteVideo=e.canMuteVideo,this.canUnmuteVideo=e.canUnmuteVideo,this.canStartScreenShare=e.canRequestShare,this.canStopScreenShare=e.canReleaseShare,this.canSendDTMF=e.canSendDigit,this.canControlRemoteCamera=e.canFarEndCameraControl,this.canCameraTiltUp=e.canTiltUp,this.canCameraTiltDown=e.canTiltDown,this.canCameraPanLeft=e.canPanLeft,this.canCameraPanRight=e.canPanRight,this.canCameraZoomIn=e.canZoomIn,this.canCameraZoomOut=e.canZoomOut,this.canUpdateVideo=e.canUpdateVideoCapability}n.prototype.canAnswer=!1,n.prototype.canEnd=!1,n.prototype.canReject=!1,n.prototype.canHold=!1,n.prototype.canResume=!1,n.prototype.canMerge=!1,n.prototype.canTransfer=!1,n.prototype.canMuteAudio=!1,n.prototype.canUnmuteAudio=!1,n.prototype.canMuteVideo=!1,n.prototype.canUnmuteVideo=!1,n.prototype.canUpdateVideo=!1,n.prototype.canStartVideo=!1,n.prototype.canStopVideo=!1,n.prototype.canStopScreenShare=!1,n.prototype.canStartScreenShare=!1,n.prototype.canSendDTMF=!1,n.prototype.canControlRemoteCamera=!1,n.prototype.canCameraTiltUp=!1,n.prototype.canCameraTiltDown=!1,n.prototype.canCameraPanLeft=!1,n.prototype.canCameraPanRight=!1,n.prototype.canCameraZoomIn=!1,n.prototype.canCameraZoomOut=!1,e.exports.TelephonyConversationCapabilities=n},function(e,t,n){function i(e){this.name=e.name,this.controlMode=e.controlMode,this.description=e.description,this.type=e.modelDescription,this.lineDirectoryNumbers=e.lineDNs,this.activeLine=e.activeLineNumber,this.isSelected=e.isSelected,this.huntGroupState=e.huntGroupState,this.guid=e.guid}var o=n(7),r={MessageSender:o.MessageSender};i.prototype.name=null,i.prototype.controlMode=null,i.prototype.description=null,i.prototype.type=null,i.prototype.lineDirectoryNumbers=null,i.prototype.activeLine=null,i.prototype.isSelected=!1,i.prototype.huntGroupState=null,i.prototype.guid=null,i.prototype.connect=function(){},i.prototype.huntGroupLogin=function(e){if("LoggedOut"===this.huntGroupState){var t="toggleHuntGroupLogin",n={deviceGuid:this.guid};r.MessageSender.sendMessage(t,n,e)}},i.prototype.huntGroupLogout=function(e){if("LoggedIn"===this.huntGroupState){var t="toggleHuntGroupLogin",n={deviceGuid:this.guid};r.MessageSender.sendMessage(t,n,e)}},e.exports.TelephonyDevice=i},function(e,t,n){function i(e){s.TelephonyDevice.call(this,e)}var o=n(21),r=n(7),s={TelephonyDevice:o.TelephonyDevice,MessageSender:r.MessageSender};i.prototype=Object.create(s.TelephonyDevice.prototype),i.prototype.constructor=i,i.prototype.connect=function(e){if(1!==arguments.length)throw Error("Invalid Number of Arguments");var t="connect",n={phoneMode:"Softphone",deviceName:this.name,lineDN:"",forceRegistration:e};s.MessageSender.sendMessage(t,n)},e.exports.SoftPhone=i},function(e,t,n){function i(e){s.TelephonyDevice.call(this,e)}var o=n(21),r=n(7),s={TelephonyDevice:o.TelephonyDevice,MessageSender:r.MessageSender};i.prototype=Object.create(s.TelephonyDevice.prototype),i.prototype.constructor=i,i.prototype.selectLine=function(e){var t="connect",n={phoneMode:"Softphone",deviceName:this.name,lineDN:e,forceRegistration:!1};s.MessageSender.sendMessage(t,n)},i.prototype.connect=function(e){if(1!==arguments.length)throw Error("Invalid number of arguments");var t="connect",n={phoneMode:"Softphone",deviceName:this.name,lineDN:"",forceRegistration:e};s.MessageSender.sendMessage(t,n)},e.exports.Deskphone=i},function(e,t,n){function i(e){s.TelephonyDevice.call(this,e);var t="";this.getNumber=function(){return t},this.setNumber=function(e){t=e}}var o=n(21),r=n(7),s={TelephonyDevice:o.TelephonyDevice,MessageSender:r.MessageSender};i.prototype=Object.create(s.TelephonyDevice.prototype),i.prototype.constructor=i,i.prototype.connect=function(e,t,n){if(2!==arguments.length)throw Error("Invalid Number of Arguments");var i="selectRemoteDestination",o={deviceName:this.name,remoteDestinationNumber:e,forceRegistration:t};s.MessageSender.sendMessage(i,o,n)},i.prototype.deleteNumber=function(e){var t="deleteRemoteDestination",n={};s.MessageSender.sendMessage(t,n,e)},e.exports.RemotePhone=i},function(e,t,n){function i(){function e(){if("Manual"==this.signInType)this.setEmail("dummy@jsdk.com");else{c.Logger.info("E-mail address is required.");var e=s.onEmailRequired;e&&e()}}function t(){c.Logger.info("Credentials are required.");var e=s.onCredentialsRequired;e&&e()}function n(e){var t=e,n=null,i="";switch(t){case"SIGNEDOUT":n=s.onSignedOut,i="Signed Out";break;case"SIGNINGOUT":n=s.onSigningOut,i="Signing Out";break;case"SIGNEDIN":n=s.onSignedIn,i="Signed In";break;case"SIGNINGIN":n=s.onSigningIn,i="Signing In";break;case"DISCOVERING":n=s.onServiceDiscovering,i="Discovering Services";break;case"RESETTING":n=s.onDataResetting,i="Resetting User Data"}c.Logger.info("Login state has changed to: "+i+"."),n&&n()}function i(e){var t=e.result,n="",i=null;switch(t){case"":case"eNoError":i=s.onAuthenticationStateChanged,n=c.AuthenticationStateMap[e.status],c.Logger.info("Authentication state has changed to: "+n);break;case"eFailed":i=s.onAuthenticationFailed,n=c.AuthenticationErrorMap[e.status],c.Logger.warning("Authentication failed! Reason: "+n)}i&&i(n)}function o(){var e=s.onLoggedIn;e&&e()}function r(e){c.Logger.info("SSO Navigation required.");var t=s.onSSONavigationRequired;if(t){var n=e,i=new RegExp("client_id=[A-Za-z0-9]*"),o="C69908c4f345729af0a23cdfff1d255272de942193e7d39171ddd307bc488d7a1",r=n.replace(i,"client_id="+o);""!==p&&(r+="&redirect_uri="+encodeURIComponent(p)),t(r)}}var s={},a=[],d=[],l=[],p="";this.signInType="Unknown",c.MessageReceiver.addMessageHandler("lifecyclestatechanged",n.bind(this)),c.MessageReceiver.addMessageHandler("userprofilecredentialsrequired",t.bind(this)),c.MessageReceiver.addMessageHandler("userprofileemailaddressrequired",e.bind(this)),c.MessageReceiver.addMessageHandler("loggedin",o.bind(this)),c.MessageReceiver.addMessageHandler("authenticationresult",i.bind(this)),c.MessageReceiver.addMessageHandler("ssonavigateto",r),this.addEventHandler=function(e,t){s[e]=t},this.removeEventHandler=function(e){delete s[e]},this.setSSORedirectURL=function(e){p=e},this.setCTIServers=function(e,t){if(!(e instanceof Array))throw Error("Invaild Object");if(e.length>3)throw"Server List Size Exceeds Maximum Value.";a=e;var n="setProperty",i={CtiAddressList:e};c.MessageSender.sendMessage(n,i,t)},this.setTFTPServers=function(e,t){if(!(e instanceof Array))throw Error("Invaild Object");if(e.length>3)throw"Server List Size Exceeds Maximum Value.";l=e;var n="setProperty",i={TftpAddressList:e};c.MessageSender.sendMessage(n,i,t)},this.setCUCMServers=function(e,t){if(!(e instanceof Array))throw Error("Invaild Object");if(e.length>3)throw"Server List Size Exceeds Maximum Value.";d=e;var n="setProperty",i={CcmcipAddressList:e};c.MessageSender.sendMessage(n,i,t)}}var o=n(2),r=n(7),s=n(4),a=n(26),c={MessageReceiver:o.MessageReceiver,MessageSender:r.MessageSender,Logger:s.Logger,AuthenticationState:a.AuthenticationState,AuthenticationError:a.AuthenticationError,AuthenticationStateMap:a.AuthenticationStateMap,AuthenticationErrorMap:a.AuthenticationErrorMap};i.prototype.signIn=function(e){this.signInType="Manual";var t="startSignIn",n={manualSettings:!0};c.MessageSender.sendMessage(t,n,e)},i.prototype.signOut=function(e){var t="logout",n={};c.MessageSender.sendMessage(t,n,e)},i.prototype.startDiscovery=function(e){this.signInType="Discovery";var t="startSignIn",n={manualSettings:!1};c.MessageSender.sendMessage(t,n,e)},i.prototype.setEmail=function(e,t){var n="setUserProfileEmailAddress",i={email:e};c.MessageSender.sendMessage(n,i,t)},i.prototype.setCredentials=function(e,t,n){var i="setUserCredentials",o={username:e,password:t};c.MessageSender.sendMessage(i,o,n)},i.prototype.resetUserData=function(e){var t="resetData",n={};c.MessageSender.sendMessage(t,n,e)},i.prototype.setSSOTokenURI=function(e,t){var n="ssoNavigationCompleted",i={result:200,url:e,document:""};c.MessageSender.sendMessage(n,i,t)},i.prototype.cancelSSO=function(e){var t="cancelSingleSignOn",n={};c.MessageSender.sendMessage(t,n,e)},e.exports.LoginController=new i},function(e,t){var n={NotAuthenticated:"NotAuthenticated",InProgress:"InProgress",Authenticated:"Authenticated"},i={InvalidConfig:"InvalidConfiguration",InvalidCredentials:"InvalidCredentials",InvalidToken:"InvalidToken",ServerCertificateRejected:"ServerCertificateRejected",ClientCertificateError:"ClientCertificateError",NoCredentialsConfigured:"NoCredentialsConfigured",CouldNotConnect:"CouldNotConnect",Failed:"Failed",SSLConnectError:"SSLConnectionError",Unknown:"Unknown"},o={eAuthenticated:"Authenticated",eInProgress:"InProgress",eNotAuthenticated:"NotAuthenticated"},r={eNoServersConfigured:"InvalidConfiguration",eCredentialsRejected:"InvalidCredentials",eInvalidToken:"InvalidToken",eServerCertificateRejected:"ServerCertificateRejected",eClientCertificateError:"ClientCertificateError",eNoCredentialsConfigured:"NoCredentialsConfigured",eCouldNotConnect:"CouldNotConnect",eFailed:"Failed",eSSLConnectError:"SSLConnectionError","":"Unknown"};e.exports.AuthenticationState=n,e.exports.AuthenticationError=i,e.exports.AuthenticationStateMap=o,e.exports.AuthenticationErrorMap=r},function(e,t,n){function i(){function e(e){if(r=new u.SystemControllerCapabilities(e.capabilities),this.addonVersion=e.version.plugin,this.systemRelease=e.version.system_release,this.platformOS=e.system.platform,this.addonVersion!==this.cwicVersion&&u.Logger.warning("Cwic version and add-on version miss-match"),u.Logger.info("System Initialized."),o.onInitialized){var t=o.onInitialized;t()}}function t(e){var t;t=e===!0?"onUserAuthorized":"onUserAuthorizationRejected";var n=o[t];n&&n()}function n(){var e=o.onAddonConnectionLost;c.uninitialize(),c=null,e&&e()}function i(e){u.Logger.info("System Initializing.");var t=u.Utilities.getBrowserType();switch(t){case"Chrome":c=new u.ChromeExtension;break;case"Firefox":c=u.Utilities.getBrowserVersion()>=50?new u.FirefoxExtension(s):new u.NPAPIPlugin(s);break;case"Safari":c=new u.NPAPIPlugin(s);break;case"InternetExplorer":c=new u.ActiveXControl(s);break;default:throw Error("Unsupported Browser")}u.Logger.info("Detected "+t+" browser."),
c.onInitializeError=e,c.initialize()}var o={},r={},s=u.Utilities.generateUniqueId(),a={},c=null;this.cwicVersion="11.8.3.282316",this.addonVersion="Unknown",this.systemRelease="Unknown",this.platformOS="Unknown",u.MessageReceiver.addMessageHandler("init",e.bind(this)),u.MessageReceiver.addMessageHandler("userauthorized",t.bind(this)),u.MessageReceiver.addMessageHandler("addonConnectionLost",n.bind(this)),this.getInstanceID=function(){return s},this.getCapabilities=function(){return r},this.getVersion=function(){return a},this.setLoggingLevel=function(e){u.Logger.logLevel=e},this.addEventHandler=function(e,t){o[e]=t},this.removeEventHandler=function(e){delete o[e]},this.initialize=function(){function e(){document.hidden||(i(),document.removeEventListener("visibilitychange",e))}document.hidden?document.addEventListener("visibilitychange",e):i(o.onInitializationError)}}var o=n(2),r=n(7),s=n(28),a=n(30),c=n(31),d=n(32),l=n(33),p=n(4),g=n(5),h=n(34),u={MessageReceiver:o.MessageReceiver,MessageSender:r.MessageSender,ChromeExtension:s.ChromeExtension,FirefoxExtension:a.FirefoxExtension,NPAPIPlugin:c.NPAPIPlugin,ActiveXControl:d.ActiveXControl,Logger:p.Logger,Utilities:g.Utilities,Version:l.Version,version:l.cwicVersion,SystemControllerCapabilities:h.SystemControllerCapabilities};e.exports.SystemController=new i},function(e,t,n){function i(){this.type="ChromeExtension"}var o=n(29),r=n(7),s=n(2),a=n(4),c={Plugin:o.Plugin,MessageSender:r.MessageSender,MessageReceiver:s.MessageReceiver,Logger:a.Logger};i.prototype=Object.create(c.Plugin.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){function e(){c.Logger.info("Chrome extension has been initialized.");var e=cwic_plugin;this.version=e.version,this.sendMessage=e.sendRequest;var t={cwicExtId:"mbhnoblcplfcookpoennihpndjobapeo",verbose:!0};c.MessageSender.plugin=this,e.init(this.onMessageReceived.bind(this),t)}function t(){if(c.Logger.error("Failed to load Chrome extension! Extension is not installed!"),this.onInitializeError){var e="https://chrome.google.com/webstore/detail/cisco-web-communicator/mbhnoblcplfcookpoennihpndjobapeo",t={errorType:"ChromeExtension",errorData:{reason:"ExtensionNotInstalled",extensionURL:e}};this.onInitializeError(t)}}c.Logger.info("Initializing Chrome extension.");var n=document.createElement("script"),i="mbhnoblcplfcookpoennihpndjobapeo";n.id=i,n.src="chrome-extension://"+i+"/cwic_plugin.js",n.onload=e.bind(this),n.onerror=t.bind(this),document.head.appendChild(n)},i.prototype.uninitialize=function(){var e="mbhnoblcplfcookpoennihpndjobapeo",t=document.getElementById(e);t.parentNode.removeChild(t),c.MessageSender.plugin=null,cwic_plugin=null},i.prototype.sendMessage=function(e){var t=cwic_plugin;c.Logger("Sending message: ",e),t.sendRequest(e)},i.prototype.onMessageReceived=function(e){c.MessageReceiver.onMessageReceived(e)},e.exports.ChromeExtension=i},function(e,t){function n(){}n.prototype.version=null,n.prototype.sendMessage=null,n.prototype.initialize=null,n.prototype.type="Unknown",n.prototype.onInitializeError=null,e.exports.Plugin=n},function(e,t,n){function i(e){this.type="FirefoxExtension",this.cwicID=e}var o=n(29),r=n(7),s=n(2),a=n(4),c={Plugin:o.Plugin,MessageSender:r.MessageSender,MessageReceiver:s.MessageReceiver,Logger:a.Logger};i.prototype=Object.create(c.Plugin.prototype),i.prototype.constructor=i,i.prototype.isExtensionInstalled=function(){function e(){n=!0}var t=null,n=!1;return window.addEventListener("cwic-extension-installed-response",e),t=new CustomEvent("cwic-extension-installed",{detail:""}),window.dispatchEvent(t),window.removeEventListener("cwic-extension-installed-response",e),n},i.prototype.initialize=function(){if(this.isExtensionInstalled())window.addEventListener("cwic-addon-message",this.onMessageReceived.bind(this)),window.dispatchEvent(new CustomEvent("cwic-initialize",{detail:this.cwicID})),c.Logger.info("Firefox extension has been initialized."),c.MessageSender.plugin=this,c.MessageSender.sendMessage("init",{});else if(c.Logger.error("Failed to load Firefox extension! Extension is not installed!"),this.onInitializeError){var e="",t={errorType:"FirefoxExtension",errorData:{reason:"ExtensionNotInstalled",extensionURL:e}};this.onInitializeError(t)}},i.prototype.sendMessage=function(e){e.client={id:this.cwicID,url:window.location.href,hostname:window.location.hostname?window.location.hostname:"file://",name:window.document.title};var t={ciscoChannelMessage:e},n=new CustomEvent("cwic-message",{detail:t});window.dispatchEvent(n)},i.prototype.uninitialize=function(){},i.prototype.onMessageReceived=function(e){c.MessageReceiver.onMessageReceived(e.detail.ciscoChannelMessage)},e.exports.FirefoxExtension=i},function(e,t,n){function i(e){this.type="NPAPIPlugin",this.cwicID=e}var o=n(29),r=n(2),s=n(7),a=n(4),c={Plugin:o.Plugin,MessageReceiver:r.MessageReceiver,MessageSender:s.MessageSender,Logger:a.Logger};i.prototype=Object.create(c.Plugin.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){c.Logger.info("Initializing NPAPI plugin.");var e="application/x-ciscowebcommunicator",t=navigator.mimeTypes[e];if(t){c.Logger.info("NPAPI plugin has been initialized.");var n=document.createElement("object");n.id="cwic-plugin",n.type="application/x-ciscowebcommunicator",document.body.appendChild(n),n.addEventListener("addonmessage",this.onMessageReceived.bind(this),!1),n.setClientId(this.cwicID),n.setUrl(window.location.href),n.setHostName(window.location.hostname?window.location.hostname:"file://"),n.setAppName(window.document.title),c.MessageSender.plugin=this,c.MessageSender.sendMessage("init",{})}else if(c.Logger.error("Failed to load NPAPI Plugin."),this.onInitializeError){var i={errorType:"NPAPIPlugin",errorData:{reason:"AddonNotInstalled"}};this.onInitializeError(i)}},i.prototype.uninitialize=function(){var e="cwic-plugin",t=document.getElementById(e);document.body.removeChild(t),c.MessageSender.plugin=null},i.prototype.sendMessage=function(e){var t=document.getElementById("cwic-plugin");e.client={id:this.cwicID,url:window.location.href,hostname:window.location.hostname?window.location.hostname:"file://",name:window.document.title};var n={ciscoChannelMessage:e};t.postMessage(JSON.stringify(n))},i.prototype.onMessageReceived=function(e){try{var t=JSON.parse(e)}catch(e){return void c.Logger.error("Failed to parse message received from Add-on!")}c.MessageReceiver.onMessageReceived(t.ciscoChannelMessage)},e.exports.NPAPIPlugin=i},function(e,t,n){function i(e){this.type="ActiveXControl",this.cwicID=e}var o=n(29),r=n(2),s=n(7),a=n(4),c={Plugin:o.Plugin,MessageReceiver:r.MessageReceiver,MessageSender:s.MessageSender,Logger:a.Logger};i.prototype=Object.create(c.Plugin.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){if("ActiveXObject"in window){c.Logger.info("Initializing ActiveX control.");try{new ActiveXObject("CiscoSystems.CWCVideoCall");c.Logger.info("ActiveX control initialized.");var e=document.createElement("object");e.id="cwic-plugin",e.type="application/x-ciscowebcommunicator",document.body.appendChild(e),e.attachEvent("onaddonmessage",this.onMessageReceived.bind(this)),e.setClientId(this.cwicID),e.setUrl(window.location.href),e.setHostName(window.location.hostname?window.location.hostname:"file://"),e.setAppName(window.document.title),c.MessageSender.plugin=this,c.MessageSender.pluginType="ActiveXControl",c.MessageSender.sendMessage("init",{})}catch(e){if(c.Logger.error("Failed to load ActiveX control"),this.onInitializeError){var t={errorType:"ActiveXControl",errorData:{reason:"AddonNotInstalled"}};this.onInitializeError(t)}}}},i.prototype.uninitialize=function(){var e="cwic-plugin",t=document.getElementById(e);t.parentNode.removeChild(t),c.MessageSender.plugin=null},i.prototype.sendMessage=function(e){var t=document.getElementById("cwic-plugin");e.client={id:this.cwicID,url:window.location.href,hostname:window.location.hostname?window.location.hostname:"file://",name:window.document.title};var n={ciscoChannelMessage:e};t.postMessage(JSON.stringify(n))},i.prototype.onMessageReceived=function(e){try{var t=JSON.parse(e);c.MessageReceiver.onMessageReceived(t.ciscoChannelMessage)}catch(e){}},e.exports.ActiveXControl=i},function(e,t){function n(e){var t=e.split(".");this.release=t[0],this.major=t[1],this.minor=t[2],this.build=t[3]}var i="11.8.3.282316";n.prototype.release="",n.prototype.major="",n.prototype.minor="",n.prototype.build="",e.exports.cwicVersion=new n(i),e.exports.Version=n},function(e,t){function n(e){this.inBrowserVideoSupport=e.videoPluginObject,this.ringtoneOnAllRingersSupport=e.ringOnAllDevices,this.ringtoneSupport=e.ringtoneSelection,this.nativeWindowDockingSupport=e.externalWindowDocking,this.nativeWindowDockingTargetSupport=e.showingDockingTarget}n.prototype.inBrowserVideoSupport=!1,n.prototype.ringtoneOnAllRingersSupport=!1,n.prototype.ringtoneSupport=!1,n.prototype.nativeWindowDockingSupport=!1,n.prototype.nativeWindowDockingTargetSupport=!1,e.exports.SystemControllerCapabilities=n},function(e,t,n){function i(){function e(e){var o=null,r=null,s=null;switch(e.windowType){case"remote":o=i.dockElement,r=i.dockElementDOMWindow,s=i;break;case"preview":o=t.dockElement,r=t.dockElementDOMWindow,s=t;break;case"share":o=n.dockElement,r=n.dockElementDOMWindow,s=n}o&&r&&s.dock(o,r)}var t=h.NativePreviewWindow,n=h.NativeScreenShareWindow,i=h.NativeConversationWindow;h.MessageReceiver.addMessageHandler("dockexternalwindowneeded",e),this.getNativePreviewWindow=function(){return t},this.getNativeScreenShareWindow=function(){return n},this.getNativeConversationWindow=function(){return i},this.createVideoWindow=function(e,t,n){var i;switch(e){case"ScreenShare":i=new h.ScreenShareWindow(t,n);break;case"Preview":i=new h.PreviewWindow(t,n);break;case"Conversation":i=new h.ConversationWindow(t,n);break;default:throw"Invalid Window Type"}return i}}var o=n(27),r=n(7),s=n(2),a=n(36),c=n(39),d=n(40),l=n(41),p=n(43),g=n(44),h={MessageSender:r.MessageSender,MessageReceiver:s.MessageReceiver,SystemController:o.SystemController,NativeScreenShareWindow:c.NativeScreenShareWindow,NativePreviewWindow:a.NativePreviewWindow,NativeConversationWindow:d.NativeConversationWindow,ScreenShareWindow:l.ScreenShareWindow,ConversationWindow:p.ConversationWindow,PreviewWindow:g.PreviewWindow};e.exports.WindowController=new i},function(e,t,n){function i(){r.NativeVideoWindow.call(this,"preview")}var o=n(37),r={NativeVideoWindow:o.NativeVideoWindow};i.prototype=Object.create(r.NativeVideoWindow.prototype),i.prototype.constructor=i(),e.exports.NativePreviewWindow=new i},function(e,t,n){function i(e){function t(){var e=null;switch(n){case"preview":e=a.PreviewDockingWindow;break;case"remote":e=a.RemoteDockingWindow;break;case"share":e=a.ScreenShareDockingWindow}return e}var n=e;this.dockElement=null,this.dockElementDOMWindow=null,this.hide=function(e){var t="hideExternalWindow",i={windowType:n};a.MessageSender.sendMessage(t,i,e)},this.show=function(e){var t;t="preview"===n||"share"===n?"showPreviewInExternalWindow":"showExternalWindow";var i={windowType:n};a.MessageSender.sendMessage(t,i,e)},this.showAlwaysOnTop=function(e,t){var i="setExternalWindowAlwaysOnTop",o={alwaysOnTop:e,windowType:n};a.MessageSender.sendMessage(i,o,t)},this.setTitle=function(e,t){var i="setExternalWindowTitle",o={title:e,windowType:n};a.MessageSender.sendMessage(i,o,t)},this.setDockTargetColor=function(e,i,o){if(!a.SystemController.getCapabilities().nativeWindowDockingSupport||!a.SystemController.getCapabilities().nativeWindowDockingTargetSupport)throw Error("No capability");var r=t();r.setDockColor(e,i,o);var s="setDockTargetColor",c={redValue:e,greenValue:i,blueValue:o,windowType:n};a.MessageSender.sendMessage(s,c)},this.dock=function(n,i){if(!a.SystemController.getCapabilities().nativeWindowDockingSupport)throw Error("No capability");var o=i?i:window;if(!(n instanceof o.HTMLElement))throw Error("Invalid HTML Element");var r=t();r.isDocked=!0,r.externalWindowDocking=a.SystemController.getCapabilities().nativeWindowDockingSupport,r.showingDockingTarget=a.SystemController.getCapabilities().nativeWindowDockingTargetSupport,r.frame=o,r.element=n,this.dockElement=n,this.dockElementDOMWindow=o;var s=r.calculateNewPosition();r.sendMessageToAddOn("dockExternalWindow",s,e),r.updatePosition()},this.undock=function(){if(!a.SystemController.getCapabilities().nativeWindowDockingSupport)throw Error("No Capability");var n=t();n.isDocked=!1,this.dockElement=null,this.dockElementDOMWindow=null;var i="undockExternalWindow",o={windowType:e};a.MessageSender.sendMessage(i,o)},this.showControls=function(e){var t="setExternalWindowShowControls",i={showControls:!0,windowType:n};a.MessageSender.sendMessage(t,i,e)},this.hideControls=function(e){var t="setExternalWindowShowControls",i={showControls:!1,windowType:n};a.MessageSender.sendMessage(t,i,e)}}var o=n(7),r=n(27),s=n(38),a={MessageSender:o.MessageSender,SystemController:r.SystemController,PreviewDockingWindow:s.PreviewDockingWindow,RemoteDockingWindow:s.RemoteDockingWindow,ScreenShareDockingWindow:s.ScreenShareDockingWindow};e.exports.NativeVideoWindow=i},function(e,t,n){function i(){this.top=0,this.left=0,this.height=0,this.width=0,this.cropTop=0,this.cropLeft=0,this.cropBottom=0,this.cropRight=0,this.cropHeight=0,this.cropWidth=0,this.scaleFactor=1}function o(e){this.type=e,this.isDocked=!0,this.isVideoBeingReceived=!1,this.frame=window,this.element=null,this.position=new i,this.externalWindowDocking=!1,this.showingDockingTarget=!1,this.scaleFactor=1,this.setDockColor=function(e,t,n){if(3!==arguments.length)throw"Invalid number of arguments for color object"},this.isPositionChanged=function(e){var t=!(this.position.top===e.top&&this.position.left===e.left&&this.position.height===e.height&&this.position.width===e.width&&this.position.cropTop===e.cropTop&&this.position.cropLeft===e.cropLeft&&this.position.cropHeight===e.cropHeight&&this.position.cropWidth===e.cropWidth&&this.position.scaleFactor===e.scaleFactor);return t},this.updatePosition=function(){if(this.isDocked){var e=this.calculateNewPosition();this.isPositionChanged(e)&&(this.sendMessageToAddOn("dockUpdate",e,this.type),this.position=e),window.setTimeout(this.updatePosition.bind(this),10)}},this.calculateNewPosition=function(){var e,t,n,o=this.element.getBoundingClientRect(),r=this.frame,s=r.innerHeight,d=r.innerWidth,l=0,p=0,g=0,h=0,u=0,v=new i;v.left=o.left,v.top=o.top,v.width=o.width,v.height=o.height,v.bottom=o.bottom,v.right=o.right;var f=r.devicePixelRatio,w=0,M=0;if("ontouchstart"in window&&navigator.maxTouchPoints>1){var m=r.innerWidth,y=m-r.document.documentElement.clientWidth;if(this.lastZoomFactor=this.lastZoomFactor||1,y>0||"Windows 10"==a.Utilities.getOSType())m-=y;else{var S=21;m-=S/this.lastZoomFactor}var C=r.document.documentElement.clientWidth/m;f*=C,this.lastZoomFactor=f;var I=r.document.body.clientWidth-r.innerWidth,D=r.document.body.clientHeight-r.innerHeight;if(C>1.01){w=r.scrollX,M=r.scrollY;var b=D-M;M=b>=0?0:Math.abs(b);var E=I-w;w=E>=0?0:Math.abs(E),b>=0&&(this.initPosY=v.top+r.scrollY),v.top>this.initPosY-D&&b<0&&(v.top=this.initPosY-D),E>=0&&(this.initPosX=v.left+r.scrollX),v.left>this.initPosX-I&&E<0&&(v.left=this.initPosX-I)}}for(v.left-=w,v.top-=M,v.cropTop=v.top<0?Math.abs(v.top):0,v.cropLeft=v.left<0?Math.abs(v.left):0,v.cropBottom=Math.max(v.bottom-s,0),v.cropRight=Math.max(v.right-d,0);r!=r.top;){e=r.frameElement.getBoundingClientRect(),t=r.parent.innerWidth,n=r.parent.innerHeight,l=""===r.frameElement.frameBorder||parseInt(r.frameElement.frameBorder,10)?2:0,p=""===r.frameElement.style.borderTopWidth?l:parseInt(r.frameElement.style.borderTopWidth||0,10);var R=window.frameElement,x=0,L=0;if(null!=R){var T=window.getComputedStyle(R,null);null!=T&&(x+=parseInt(T.getPropertyValue("padding-left")||0,10),L+=parseInt(T.getPropertyValue("padding-top")||0,10))}h=L,e.top<0&&(v.top+v.cropTop<0?v.cropTop+=Math.abs(e.top):Math.abs(e.top)-(v.top+v.cropTop+p+h)>0&&(v.cropTop+=Math.abs(Math.abs(e.top)-(v.top+v.cropTop+p+h)))),e.top+p+h+v.top+v.height-v.cropBottom>n&&(v.cropBottom=e.top+p+h+v.top+v.height-n),v.top+=e.top+p+h,g=""===r.frameElement.style.borderLeftWidth?l:parseInt(r.frameElement.style.borderLeftWidth||0,10),u=x,e.left<0&&(v.left+v.cropLeft<0?v.cropLeft+=Math.abs(e.left):Math.abs(e.left)-(v.left+v.cropLeft+g+u)>0&&(v.cropLeft+=Math.abs(Math.abs(e.left)-(v.left+v.cropLeft+g+u)))),e.left+g+u+v.left+v.width-v.cropRight>t&&(v.cropRight=e.left+g+u+v.left+v.width-t),v.left+=e.left+g+u,r=r.parent}return v.cropLeft=v.width>v.cropLeft?v.cropLeft:v.width,v.cropTop=v.height>v.cropTop?v.cropTop:v.height,v.cropWidth=Math.max(v.width-(v.cropLeft+v.cropRight),0),v.cropHeight=Math.max(v.height-(v.cropTop+v.cropBottom),0),v.left=Math.round(v.left),v.top=Math.round(v.top),v.width=Math.round(v.width),v.height=Math.round(v.height),v.cropleft=Math.round(v.cropLeft),v.cropTop=Math.round(v.cropTop),v.cropWidth=Math.round(v.cropWidth),v.cropHeight=Math.round(v.cropHeight),v.scaleFactor=f,"Firefox"==a.Utilities.getBrowserType()&&"windows"==c.SystemController.platformOS&&(v.top+=Math.ceil(window.top.mozInnerScreenY),v.left+=Math.ceil(window.top.mozInnerScreenX)),v.browserHeight=window.outerHeight,v.browserWidth=window.outerWidth,v.viewPortHeight=window.top.innerHeight,v.viewPortWidth=window.top.innerWidth,v},this.sendMessageToAddOn=function(e,t,n){var i={offsetX:t.left,offsetY:t.top,width:t.width,height:t.height,cropOffsetX:t.cropLeft,cropOffsetY:t.cropTop,cropWidth:t.cropWidth,cropHeight:t.cropHeight,scaleFactor:t.scaleFactor,windowType:n,browserHeight:t.browserHeight,browserWidth:t.browserWidth,viewPortHeight:t.viewPortHeight,viewPortWidth:t.viewPortWidth};"dockExternalWindow"===e&&(i.title=this.frame.top.document.title||this.frame.top.location.host+this.frame.top.location.pathname+this.frame.top.location.search),c.MessageSender.sendMessage(e,i)},this.hasDockingCapabilities=function(){var e;try{e=c.SystemController.getCapabilities().nativeWindowDockingSupport}catch(t){e=null}return e}}var r=n(7),s=n(27),a=n(5),c={MessageSender:r.MessageSender,SystemController:s.SystemController};e.exports.PreviewDockingWindow=new o("preview"),e.exports.RemoteDockingWindow=new o("remote"),e.exports.ScreenShareDockingWindow=new o("share")},function(e,t,n){function i(){r.NativeVideoWindow.call(this,"share")}var o=n(37),r={NativeVideoWindow:o.NativeVideoWindow};i.prototype=Object.create(r.NativeVideoWindow.prototype),i.prototype.constructor=i(),e.exports.NativeScreenShareWindow=new i},function(e,t,n){function i(){s.NativeVideoWindow.call(this,"remote")}var o=n(37),r=n(7),s={NativeVideoWindow:o.NativeVideoWindow,MessageSender:r.MessageSender};i.prototype=Object.create(s.NativeVideoWindow.prototype),i.prototype.constructor=new i,i.prototype.showVideoForConversation=function(e,t){var n="showCallInExternalWindow",i={callId:e.ID};s.MessageSender.sendMessage(n,i,t)},i.prototype.showSelfView=function(e){var t="setExternalWindowShowSelfViewPip",n={showSelfViewPip:"true"};s.MessageSender.sendMessage(t,n,e)},i.prototype.hideSelfView=function(e){var t="setExternalWindowShowSelfViewPip",n={showSelfViewPip:!1};s.MessageSender.sendMessage(t,n,e)},i.prototype.showSelfViewBorder=function(e){var t="setExternalWindowShowSelfViewPipBorder",n={showSelfViewPipBorder:!0};s.MessageSender.sendMessage(t,n,e)},i.prototype.hideSelfViewBorder=function(e){var t="setExternalWindowShowSelfViewPipBorder",n={showSelfViewPipBorder:!1};s.MessageSender.sendMessage(t,n,e)},i.prototype.setSelfViewPosition=function(e,t,n,i,o){var r="setExternalWindowSelfViewPipPosition",a={pipLeft:e,pipTop:t,pipRight:n,pipBottom:i};s.MessageSender.sendMessage(r,a,o)},e.exports.NativeConversationWindow=new i},function(e,t,n){function i(e,t){var n=new s.VideoWindow(e,t);this.showForConversation=function(e){var t="addShareWindow";n.element.style.width="100%",n.element.style.height="100%",n.executeMethod(t,e.ID)},this.hideForConversation=function(e){var t="removeShareWindow";n.element.style.width="0%",n.element.style.height="0%",n.executeMethod(t,e.ID)}}var o=n(42),r=n(18),s={VideoWindow:o.VideoWindow,TelephonyConversation:r.TelephonyConversation};e.exports.ScreenShareWindow=i},function(e,t,n){function i(e,t){var n=t?t:window;if(!(e instanceof n.HTMLElement))throw Error("Invalid HTML Type");if(!e.id)throw Error("Element Requires ID");var i=n.document.createElement("object");i.type="application/x-cisco-cwc-videocall",i.id="videoWindow-"+e.id+s.Utilities.generateUniqueId(),i.style.width="0%",i.style.height="0%",e.appendChild(i),this.element=i,this.executeMethod=function(e,t){var n=s.SystemController.getInstanceID(),o=s.Utilities.generateUniqueId(),r=window.location.href,a=window.location.hostname,c=window.document.title,d=[o,n,r,a,c];t&&d.unshift(t),i[e].apply(this,d)},this.executeMethod("configure")}var o=n(27),r=n(5),s={SystemController:o.SystemController,Utilities:r.Utilities};e.exports.VideoWindow=i},function(e,t,n){function i(e,t){var n=new s.VideoWindow(e,t);this.showForConversation=function(e){var t="addWindowToCall";n.element.style.width="100%",n.element.style.height="100%",n.executeMethod(t,e.ID);var t="startRemoteVideo";n.executeMethod(t,e.ID)},this.hideForConversation=function(e){var t="removeWindowFromCall";n.element.style.width="0%",n.element.style.height="0%",n.executeMethod(t,e.ID)}}var o=n(42),r=n(18),s={VideoWindow:o.VideoWindow,TelephonyConversation:r.TelephonyConversation};e.exports.ConversationWindow=i},function(e,t,n){function i(e,t){var n=new r.VideoWindow(e,t);this.show=function(){var e="addPreviewWindow";n.element.style.width="100%",n.element.style.height="100%",n.executeMethod(e)},this.hide=function(){var e="removePreviewWindow";n.element.style.width="0%",n.element.style.height="0%",n.executeMethod(e)}}var o=n(42),r={VideoWindow:o.VideoWindow};e.exports.PreviewWindow=i},function(e,t,n){function i(){function e(e){var n=t.onInvalidCertificate;if(n){for(var i=new a.InvalidCertificate(e),o=[],r=0;r<e.invalidReasons.length;r++)o.push(e.invalidReasons[r].invalidReason);n(i,o,e.allowUserToAccept)}}var t={};a.MessageReceiver.addMessageHandler("invalidcertificate",e),this.addEventHandler=function(e,n){t[e]=n},this.removeEventHandler=function(e){delete t[e]}}var o=n(2),r=n(7),s=n(46),a={MessageReceiver:o.MessageReceiver,MessageSender:r.MessageSender,InvalidCertificate:s.InvalidCertificate};i.prototype.acceptInvalidCertificate=function(e,t){if(!(e instanceof a.InvalidCertificate))throw Error("Invalid Object");var n="handleInvalidCertificate",i={certFingerprint:e.fingerprint,accept:!0};a.MessageSender.sendMessage(n,i,t)},i.prototype.rejectInvalidCertificate=function(e,t){if(!(e instanceof a.InvalidCertificate))throw Error("Invalid Type");var n="handleInvalidCertificate",i={certFingerprint:e.fingerprint,accept:!1};a.MessageSender.sendMessage(n,i,t)},e.exports.CertificateController=new i},function(e,t){function n(e){this.subjectCN=e.certSubjectCN,this.fingerprint=e.certFingerprint,this.identifier=e.identifierToDisplay,this.referenceID=e.referenceId}n.prototype.subjectCN="",n.prototype.fingerprint="",n.prototype.identifier="",n.prototype.referenceID="",e.exports.InvalidCertificate=n}]);
//# sourceMappingURL=cwic.js.map